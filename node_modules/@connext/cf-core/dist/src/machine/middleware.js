"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const enums_1 = require("./enums");
class MiddlewareContainer {
    constructor() {
        this.middlewares = {
            [enums_1.Opcode.IO_SEND]: [],
            [enums_1.Opcode.IO_SEND_AND_WAIT]: [],
            [enums_1.Opcode.OP_SIGN]: [],
            [enums_1.Opcode.WRITE_COMMITMENT]: [],
            [enums_1.Opcode.PERSIST_STATE_CHANNEL]: []
        };
    }
    add(scope, method) {
        this.middlewares[scope].push(method);
    }
    async run(opCode, args) {
        const middleware = this.middlewares[opCode][0];
        if (middleware === undefined) {
            throw Error(`Attempted to run middleware for opcode ${opCode} but none existed`);
        }
        return middleware(args);
    }
}
exports.MiddlewareContainer = MiddlewareContainer;
//# sourceMappingURL=middleware.js.map