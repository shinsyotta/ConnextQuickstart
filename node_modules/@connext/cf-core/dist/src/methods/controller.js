"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const rpc_server_1 = require("rpc-server");
class NodeController extends rpc_server_1.Controller {
    async executeMethod(requestHandler, params) {
        await this.beforeExecution(requestHandler, params);
        const lockNames = await this.getRequiredLockNames(requestHandler, params);
        const createExecutionPromise = () => this.executeMethodImplementation(requestHandler, params);
        const ret = await requestHandler.processQueue.addTask(lockNames, createExecutionPromise);
        await this.afterExecution(requestHandler, params);
        return ret;
    }
    async beforeExecution(requestHandler, params) { }
    async afterExecution(requestHandler, params) { }
    async getRequiredLockNames(requestHandler, params) {
        return [];
    }
}
exports.NodeController = NodeController;
//# sourceMappingURL=controller.js.map