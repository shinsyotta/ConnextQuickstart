"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("../../../types");
async function rejectInstallVirtualController(requestHandler, params) {
    const { store, messagingService, publicIdentifier } = requestHandler;
    const { appInstanceId } = params;
    const proposal = await store.getAppInstanceProposal(appInstanceId);
    const stateChannel = await store.getChannelFromAppInstanceID(appInstanceId);
    await store.saveStateChannel(stateChannel.removeProposal(appInstanceId));
    const rejectInstallVirtualMsg = {
        from: publicIdentifier,
        type: types_1.NODE_EVENTS.REJECT_INSTALL_VIRTUAL,
        data: {
            appInstanceId
        }
    };
    await messagingService.send(proposal.proposedByIdentifier, rejectInstallVirtualMsg);
    return {};
}
exports.default = rejectInstallVirtualController;
//# sourceMappingURL=controller.js.map