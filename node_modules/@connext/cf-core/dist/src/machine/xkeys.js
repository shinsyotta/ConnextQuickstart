"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ethers_1 = require("ethers");
const utils_1 = require("ethers/utils");
const hdnode_1 = require("ethers/utils/hdnode");
const memoizee_1 = __importDefault(require("memoizee"));
const xkeyKthHDNode = memoizee_1.default((xkey, k) => hdnode_1.fromExtendedKey(xkey).derivePath(k), { max: 100, maxAge: 60 * 1000, primitive: true });
const sortSigningkeys = (addrs) => addrs.sort((a, b) => parseInt(a.address, 16) < parseInt(b.address, 16) ? -1 : 1);
exports.computeRandomExtendedPrvKey = () => hdnode_1.fromMnemonic(ethers_1.Wallet.createRandom().mnemonic).extendedKey;
exports.sortAddresses = (addrs) => addrs.sort((a, b) => (parseInt(a, 16) < parseInt(b, 16) ? -1 : 1));
exports.xkeyKthAddress = (xkey, k = "0") => xkeyKthHDNode(xkey, k.toString()).address;
exports.xkeysToSortedKthAddresses = (xkeys, k = "0") => exports.sortAddresses(xkeys.map((xkey) => exports.xkeyKthAddress(xkey, k)));
exports.xkeysToSortedKthSigningKeys = (xkeys, k = "0") => sortSigningkeys(xkeys.map((xkey) => new utils_1.SigningKey(xkeyKthHDNode(xkey, k.toString()).privateKey)));
//# sourceMappingURL=xkeys.js.map