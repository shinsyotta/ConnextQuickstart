"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ethers_1 = require("ethers");
class AutoNonceWallet extends ethers_1.Wallet {
    async sendTransaction(tx) {
        if (!tx.nonce) {
            if (this.noncePromise === undefined) {
                this.noncePromise = this.provider.getTransactionCount(this.address);
            }
            const tmp = this.noncePromise;
            this.noncePromise = this.noncePromise.then(nonce => nonce + 1);
            tx.nonce = await tmp;
        }
        return await super.sendTransaction(tx);
    }
}
exports.default = AutoNonceWallet;
//# sourceMappingURL=auto-nonce-wallet.js.map