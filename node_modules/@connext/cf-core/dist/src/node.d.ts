import { BaseProvider } from "ethers/providers";
import { RequestHandler } from "./request-handler";
import RpcRouter from "./rpc-router";
import { NetworkContext, CFCoreTypes } from "./types";
export interface NodeConfig {
    STORE_KEY_PREFIX: string;
}
export declare class Node {
    private readonly publicExtendedKey;
    private readonly privateKeyGetter;
    private readonly messagingService;
    private readonly storeService;
    private readonly nodeConfig;
    private readonly provider;
    readonly networkContext: NetworkContext;
    readonly blocksNeededForConfirmation: number;
    private readonly lockService?;
    private readonly incoming;
    private readonly outgoing;
    private readonly protocolRunner;
    private readonly ioSendDeferrals;
    private signer;
    protected requestHandler: RequestHandler;
    rpcRouter: RpcRouter;
    static create(messagingService: CFCoreTypes.IMessagingService, storeService: CFCoreTypes.IStoreService, networkContext: NetworkContext, nodeConfig: NodeConfig, provider: BaseProvider, lockService?: CFCoreTypes.ILockService, publicExtendedKey?: string, privateKeyGenerator?: CFCoreTypes.IPrivateKeyGenerator, blocksNeededForConfirmation?: number): Promise<Node>;
    private constructor();
    private asynchronouslySetupUsingRemoteServices;
    readonly publicIdentifier: string;
    signerAddress(): Promise<string>;
    readonly freeBalanceAddress: string;
    private buildProtocolRunner;
    on(event: CFCoreTypes.EventName | CFCoreTypes.RpcMethodName, callback: (res: any) => void): void;
    off(event: CFCoreTypes.EventName | CFCoreTypes.RpcMethodName, callback?: (res: any) => void): void;
    once(event: CFCoreTypes.EventName | CFCoreTypes.RpcMethodName, callback: (res: any) => void): void;
    emit(event: CFCoreTypes.EventName | CFCoreTypes.RpcMethodName, req: CFCoreTypes.MethodRequest): void;
    call(method: CFCoreTypes.MethodName, req: CFCoreTypes.MethodRequest): Promise<CFCoreTypes.MethodResponse>;
    private registerMessagingConnection;
    private handleReceivedMessage;
    private handleIoSendDeferral;
}
//# sourceMappingURL=node.d.ts.map