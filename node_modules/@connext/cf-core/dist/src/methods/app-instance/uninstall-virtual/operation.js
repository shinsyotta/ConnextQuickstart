"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const machine_1 = require("../../../machine");
async function uninstallVirtualAppInstanceFromChannel(store, protocolRunner, provider, initiatorXpub, responderXpub, intermediaryXpub, appInstanceId) {
    const stateChannel = await store.getChannelFromAppInstanceID(appInstanceId);
    const appInstance = stateChannel.getAppInstance(appInstanceId);
    const currentChannels = await store.getStateChannelsMap();
    await protocolRunner.initiateProtocol(machine_1.Protocol.UninstallVirtualApp, currentChannels, {
        initiatorXpub,
        responderXpub,
        intermediaryXpub,
        targetOutcome: await appInstance.computeOutcome(appInstance.state, provider),
        targetAppIdentityHash: appInstance.identityHash
    });
}
exports.uninstallVirtualAppInstanceFromChannel = uninstallVirtualAppInstanceFromChannel;
//# sourceMappingURL=operation.js.map